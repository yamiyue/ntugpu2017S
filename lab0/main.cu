


#include <cstdio>
#include <cstdlib>
#include "../utils/SyncedMemory.h"



const int W = 61;
const int H = 37;

__constant__ char a[37][61] = {
	"|----------------------------------------------------------|",// 
	"|                                                          |", 
	"|                            @@                            |",
	"|                          @@@@@@                          |",
	"|                          @@  @@                          |",
	"|                        @@@@  @@@@                        |",
	"|                        @@      @@                        |",
	"|                      @@@@      @@@@                      |",
	"|                      @@          @@                      |",
	"|                    @@@@          @@@@                    |",
	"|                    @@              @@                    |",
	"|                  @@@@              @@@@                  |",
	"|                  @@                  @@                  |",
	"|                @@@@                  @@@@                |",
	"|                @@                      @@                |",
	"|              @@@@                      @@@@              |",
	"|              @@                          @@              |",	
	"|            @@@@                          @@@@            |",
	"|  @@    @@@@@@                              @@@@@@    @@  |",
	"|    @@@@@@@@@@                              @@@@@@@@@@    |",
	"|    @@@@@@@@                                  @@@@@@@@    |",
	"|    @@@@@@@@                                  @@@@@@@@    |",
	"|    @@@@@@@@@@                              @@@@@@@@@@    |",
	"|  @@      @@@@                              @@@@      @@  |",
	"|            @@@@                          @@@@            |",
	"|              @@@@                      @@@@              |",
	"|                @@@@                  @@@@                |",
	"|                  @@@@              @@@@                  |",
	"|                    @@@@          @@@@                    |",
	"|          @@          @@@@       @@@@         @@          |",
	"|            @@@@            @@            @@@@            |",
	"|            @@@@@@          @@          @@@@@@            |",
	"|              @@@@@@@@@@  @@@@@@  @@@@@@@@@@              |",
	"|                  @@@@@@@@@@@@@@@@@@@@@@                  |",
	"|                    @@@@@@@@@@@@@@@@@@                    |",
	"|                                                          |",
	"|----------------------------------------------------------|"//37

};


__global__ void Draw(char *frame) {

	const int y = blockIdx.y * blockDim.y + threadIdx.y;
	const int x = blockIdx.x * blockDim.x + threadIdx.x;
	if (y < H && x < W) {
		char c;
		if (x == W - 1) {
			c = y == H - 1 ? '\0' : '\n';
		}		
		else{
			c = a[y][x];
			//c = ' ';
		}
		
		frame[y*W + x] = c;
	}
}

int main(int argc, char **argv)
{
	MemoryBuffer<char> frame(W*H);
	auto frame_smem = frame.CreateSync(W*H);


	Draw <<<dim3((W - 1) / 16 + 1, (H - 1) / 12 + 1), dim3(16, 12) >>>(frame_smem.get_gpu_wo());


	puts(frame_smem.get_cpu_ro());

	return 0;
}